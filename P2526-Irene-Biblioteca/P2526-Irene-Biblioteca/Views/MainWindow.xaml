<Window x:Class="P2526_Irene_Biblioteca.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Biblioteca"
        WindowState="Maximized"
        WindowStyle="None"
        ResizeMode="CanResize"
        MinWidth="1000"
        MinHeight="650"
        WindowStartupLocation="CenterScreen"
        Background="#0B1220"
        PreviewKeyDown="Window_PreviewKeyDown"
        Loaded="Window_Loaded">

    <Window.Resources>
        <Color x:Key="Blue">#1A73E8</Color>
        <Color x:Key="BlueDark">#0F4FB5</Color>
        <Color x:Key="Teal">#22C1C3</Color>
        <Color x:Key="Bg">#F7FAFF</Color>
        <Color x:Key="Card">#FFFFFF</Color>
        <Color x:Key="Text">#1F2937</Color>
        <Color x:Key="Muted">#6B7280</Color>

        <SolidColorBrush x:Key="BrushBlue" Color="{StaticResource Blue}"/>
        <SolidColorBrush x:Key="BrushBlueDark" Color="{StaticResource BlueDark}"/>
        <SolidColorBrush x:Key="BrushTeal" Color="{StaticResource Teal}"/>
        <SolidColorBrush x:Key="BrushBg" Color="{StaticResource Bg}"/>
        <SolidColorBrush x:Key="BrushCard" Color="{StaticResource Card}"/>
        <SolidColorBrush x:Key="BrushText" Color="{StaticResource Text}"/>
        <SolidColorBrush x:Key="BrushMuted" Color="{StaticResource Muted}"/>

        <FontFamily x:Key="AppFont">/Fonts/#Quicksand</FontFamily>

        <Style x:Key="TopBarTitle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource AppFont}"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style x:Key="IconButton" TargetType="Button">
            <Setter Property="Width" Value="44"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="Background" Value="#22FFFFFF"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="10" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#33FFFFFF"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SideTitle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource AppFont}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Margin" Value="0,0,0,18"/>
        </Style>

        <Style x:Key="MenuButtonStyleV2" TargetType="Button">
            <Setter Property="FontFamily" Value="{StaticResource AppFont}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Foreground" Value="#EAF2FF"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="12" Background="{TemplateBinding Background}">
                            <ContentPresenter Margin="6,0" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>

            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1FFFFFFF"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#2AFFFFFF"/>
                </Trigger>

                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Foreground" Value="#88EAF2FF"/>
                    <Setter Property="Cursor" Value="Arrow"/>
                    <Setter Property="Background" Value="#11FFFFFF"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="ContentShell" TargetType="Border">
            <Setter Property="CornerRadius" Value="18"/>
            <Setter Property="Background" Value="{StaticResource BrushBg}"/>
            <Setter Property="Padding" Value="18"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="#0F4FB5" Offset="0"/>
                    <GradientStop Color="#1A73E8" Offset="0.6"/>
                    <GradientStop Color="#22C1C3" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>

            <Grid Margin="18">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,16">
                        <TextBlock Text="📚" FontSize="22" Margin="0,0,10,0" Foreground="White"/>
                        <TextBlock Text="Biblioteca" Style="{StaticResource TopBarTitle}"/>
                    </StackPanel>

                    <TextBlock Text="Menú" Style="{StaticResource SideTitle}"/>

                    <Button Style="{StaticResource MenuButtonStyleV2}" Content="🏷  Autores" Click="Autores_Click"
                            IsEnabled="{Binding EsEmpleado}"/>
                    <Button Style="{StaticResource MenuButtonStyleV2}" Content="📚  Libros" Click="Libros_Click"
                            IsEnabled="{Binding EsEmpleado}"/>
                    <Button Style="{StaticResource MenuButtonStyleV2}" Content="🗂  Categorías" Click="Categorias_Click"
                            IsEnabled="{Binding EsEmpleado}"/>
                    <Button Style="{StaticResource MenuButtonStyleV2}" Content="👥  Clientes" Click="Clientes_Click"
                            IsEnabled="{Binding EsEmpleado}"/>
                    <Button Style="{StaticResource MenuButtonStyleV2}" Content="🧑  Empleados" Click="Empleados_Click"
                            IsEnabled="{Binding EsEmpleado}"/>

                    <Button Style="{StaticResource MenuButtonStyleV2}" Content="📖  Préstamos" Click="Prestamos_Click"
                            IsEnabled="{Binding PuedeVerPrestamos}"/>
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Column="1" Margin="18">
            <Grid.RowDefinitions>
                <RowDefinition Height="64"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Border CornerRadius="18" Background="#121B2C" Padding="16"
                    MouseLeftButtonDown="TopBar_MouseLeftButtonDown">
                <Grid Margin="0,-16,0,-16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Panel de gestión" FontFamily="{StaticResource AppFont}" Foreground="#EAF2FF" FontSize="16" FontWeight="SemiBold"/>
                        <TextBlock Text="   ·   " Foreground="#66FFFFFF" Margin="0,0"/>
                        <TextBlock Text="{Binding NombreVistaActual}" FontFamily="{StaticResource AppFont}" Foreground="#BFD8FF" VerticalAlignment="Center"/>
                    </StackPanel>

                    <Button Grid.Column="1" Style="{StaticResource IconButton}" Click="Minimize_Click" Margin="0,0,10,0">
                        <TextBlock Text="—" Foreground="White" FontSize="16"/>
                    </Button>

                    <Button Grid.Column="2" Style="{StaticResource IconButton}" Click="MaxRestore_Click" Margin="0,0,10,0">
                        <TextBlock Text="☐" Foreground="White" FontSize="14"/>
                    </Button>

                    <Button Grid.Column="3" Style="{StaticResource IconButton}" Click="Close_Click">
                        <TextBlock Text="✕" Foreground="White" FontSize="16"/>
                    </Button>
                </Grid>
            </Border>

            <Border Grid.Row="1" Style="{StaticResource ContentShell}">
                <Grid>
                    <ContentControl Content="{Binding CurrentView}"/>

                    <ResizeGrip HorizontalAlignment="Right"
                                VerticalAlignment="Bottom"
                                Margin="0,0,4,4"
                                Foreground="{StaticResource BrushBlueDark}"/>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
